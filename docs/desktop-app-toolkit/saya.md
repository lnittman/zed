# Saya ASCII Game

This example project demonstrates building a lightweight desktop game named **Saya** using the same tools that power Zed.

## Overview
- Binary crate [`saya`](../../crates/saya) renders its UI with [`gpui`](../../crates/gpui).
- Scenes and choices are generated by the Gemini 2.5 Flash model through OpenRouter using the [`open_ai`](../../crates/open_ai) client.

## Wireframe

```
+-------------------------------+
| Saya                          |
|                               |
| > 1. Explore the forest       |
| > 2. Check inventory          |
| > 3. Rest at camp             |
+-------------------------------+
```

## Updated Layout

The interface focuses on a viewport that renders ASCII art from the AI. Below
the viewport are four buttons representing the actions the player can take.

```text
+-----------------------------------+
| ~ scene text here ~               |
|                                   |
| [1] [2] [3] [4]                   |
+-----------------------------------+
```

## Prompt Template

```text
<instructions>
You are the narrator of a fantasy adventure.
Return an ASCII scene describing the player's surroundings and a numbered list of actions.
Include only text inside <scene> tags.
</instructions>
```

## Example Response

```
<scene>
   ~ The Moonlit Clearing ~
   A gentle breeze rustles the leaves.
   1. Follow the path north
   2. Investigate the glowing stone
   3. Open your map
</scene>
```

Structured responses keep the game logic small while allowing the model to improvise.

## Running Saya Locally

1. Set your OpenRouter API key in the `OPENAI_API_KEY` environment variable.
2. Point the OpenAI provider to OpenRouter by adding this to `~/.config/zed/settings.json`:

```json
{
  "language_models": {
    "openai": { "api_url": "https://openrouter.ai/api/v1" }
  }
}
```

3. Launch the game with:

```bash
cargo run -p saya
```

Use `--release` for an optimized build:

```bash
cargo run -p saya --release
```

The compiled binary will appear in `target/release/` and can be run directly.

4. To bundle a macOS `.app`, run the helper script:

```bash
./script/bundle-mac-saya
```

This produces an application bundle you can copy to `/Applications`.

OpenRouter's API is compatible with OpenAI's, so the [`open_ai`](../../crates/open_ai) client is reused. Pointing its `api_url` to OpenRouter is all that's requiredâ€”no separate crate is needed.
